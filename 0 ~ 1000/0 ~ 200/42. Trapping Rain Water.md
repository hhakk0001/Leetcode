# 251219

不好想，建議多複習。

# 題目

給定一包含 `n` 個非負整數的陣列 `height`，每個元素代表一個柱子的高度，  
柱子寬度皆為 1，求這些柱子之間最多能接多少單位的雨水?

## 與 11. 的不同

Leetcode 11. 假設容器的左右兩邊是不佔容器空間的，而這題的柱子本身是具有寬度的。

## DP + 前後綴分解

重點: **柱子間能裝多少水，取決於兩側最高的柱子之高度差。**
(可參考力扣官方解法 1 中的圖片，會比較好理解)

> 考慮題目範例，以 `height[6]` 而言，該容器是左低右高。
> 以左的最大高度為 `max(height[:7]) = 2`，右邊最高柱子為 `max(height[6:]) = 3`
> 代表超過高度 `min(2, 3) = 2` 的雨水都會流走; 右邊則同理。

作法: 
* 用兩個陣列分別儲存每個元素上的前綴/後綴最大值。
* 每個元素上的容器容量即為 `min(前綴最大高度, 後綴最大高度) - 該處的柱子高度`。

* 時間複雜度: $O(n)$，三個 loop 都是 O(n)。
* 空間複雜度: $O(n)$，兩個陣列都是 O(n)。

## 雙指標

承上，除了維護兩個陣列外，
我們可以分別用一個變數來維護前、後綴最大值，並建立一對相向雙指標來更新。 

因為短板理論，我們知道容器能裝多少水取決於短邊。  

* 當左右兩指標 `left, right` 相向前進，同時更新前、後綴最大值 `pre_max, suf_max`:
  * 若 `pre_max < suf_max`: 因為最大值不會變小，代表此處左邊較低，可容納的水量即為 `pre_max - height[left]`。
  * 若 `pre_max > suf_max`: 同理可推，容量為 `suf_max - height[right]`。


* 時間複雜度: $O(n)$
* 空間複雜度: $O(1)$

# 相關題型

* [11. 具有最多水的容器](/0%20~%201000/0%20~%20200/11.%20Container%20With%20Most%20Water.md)

# 參考資料

* [盛最多水的容器 接雨水【基础算法精讲 02】](https://www.bilibili.com/video/BV1Qg411q7ia?vd_source=bd16280ff412feb48fe86b247719e368&spm_id_from=333.788.videopod.sections)
* https://leetcode.cn/problems/trapping-rain-water/solutions/692342/jie-yu-shui-by-leetcode-solution-tuvc
* 

###### tags: `Array`, `Two Pointers`, `Dynamic Programming`, `Stack`, `Monotonic Stack`